{% extends 'admin_templates/admin_base.html' %}

{% load static %}

{% block title %} Admin Dashboard {% endblock title %}

{% block style %}
<link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet'>
<link rel="stylesheet" type="text/css" href="{% static 'portal_admin/css/admin_task_dashboard.css' %}">

{% endblock style %}

{% block content %}
	<div class="row">
		<div class="col-sm-12">
			<h3 class="dashboard_welcome_greeting">Task Dashboard</h3>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-9">
			<div class="row">
				<div class="col-sm-6">
					<div class="card ">
						<div class="card-body" style="height: 420px;">
							<div class="row">
								<div class="col-sm-9 feeds_title">
									<h4>Task Feeds</h4>
								</div>
								<div class="col-sm-3" style="text-align: right;">
									<div class="dropdown">
										<span class="dropdown-toggle" type="button" id="TicketFeedDropDown" data-bs-toggle="dropdown" aria-expanded="false">
											<b>All Tickets</b>
										</span>
										<ul class="dropdown-menu" aria-labelledby="TicketFeedDropDown">
									    <li><a class="dropdown-item" href="#">Open</a></li>
									    <li><a class="dropdown-item" href="#">In Progress</a></li>
									    <li><a class="dropdown-item" href="#">For Approval</a></li>
									    <li><a class="dropdown-item" href="#">Complete</a></li>
										</ul>
								</div>
								</div>
							</div>
							<div class="row scroll" style="height: 350px;">
								<ul class="list-group">
									{% for task in all_task %}
										<li class="list-group-item remove-border-list">
											<div class="row">
									  			<div class="col-sm-1" style="text-align: right;">
									  				{% if task.owner.profile_picture|length > 0%}
										 				<img src="{{ task.owner.profile_picture.url }}" alt="mdo" width="35" height="35" class="rounded-circle client_round_images" style="margin-top: 5px;">
										 			{% else %}
										 				<img src="https://github.com/mdo.png" alt="mdo" width="35" height="35" class="rounded-circle client_round_images" style="margin-top: 5px;">
										 			{% endif %}
										 		</div>
										 		<div class="col-sm-11" style="border: 1px solid black; border-radius: 3%;">
										 			<div class="row task_feed">
										 				<div class="col-sm-12">
										 					{% if task.status == "OPEN" %}
											 					{{ task.owner.first_name }} {{ task.owner.last_name }} has created a <span class="ticket_color">Ticket</span>
										 					{% elif task.status == "IN PROGRESS" %}
										 						{{ task.user_last_updated.first_name }} {{ task.user_last_updated.last_name }} has update a <span class="ticket_color">Ticket</span> and change status to <span style="color:#0dcaf0;">{{ task.status }}</span>
										 					{% elif task.status == "IN REVIEW" %}
										 						{{ task.user_last_updated.first_name }} {{ task.user_last_updated.last_name }} has update a <span class="ticket_color">Ticket</span> and change status to <span style="color:#198754;">{{ task.status }}</span>
										 					{% elif task.status == "FOR APPROVAL" %}
										 						{{ task.user_last_updated.first_name }} {{ task.user_last_updated.last_name }} has update a <span class="ticket_color">Ticket</span> and change status to <span style="color:#ffc107;">{{ task.status }}</span>
										 					{% endif %}
											 				
											 			</div>
											 			<!-- <div class="col-sm-12">
											 				<span class="badge bg-warning text-dark">Comment ID </span> last comment.
											 			</div> -->
											 			
											 				<div class="col-sm-6" style="color:#878383;">
												 				{% if task.status == "OPEN" %}
												 					<span class="badge bg-success">{{ task.pk }}</span> {{task.title}}
											 					{% elif task.status == "IN PROGRESS" %}
											 						<span class="badge bg-info text-dark">{{ task.pk }}</span> {{task.title}}
											 					{% elif task.status == "IN REVIEW" %}
											 						<span class="badge bg-success">{{ task.pk }}</span> {{task.title}}	
											 					{% elif task.status == "FOR APPROVAL" %}
											 						<span class="badge bg-warning text-dark">{{ task.pk }}</span> {{task.title}}	
											 					{% endif %}
												 			</div>
												 			<div class="col-sm-6" style="text-align:right;">
												 				{% if task.urgency == "LOW" %}
												 					Severity: <span class="ticket_critical"><b>{{task.urgency}}</b></span>
												 				{% elif task.urgency == "MEDIUM" %}
												 					Severity: <span class="ticket_critical"><b>{{task.urgency}}</b></span>
												 				{% elif task.urgency == "HIGH"}
												 					Severity: <span class="ticket_critical"><b>{{task.urgency}}</b></span>
												 				{% endif %}
												 			</div>
											 			
											 			<div class="col-sm-6" style="text-align: left;">
											 				{% if task.status == "OPEN" %}
											 					{{ task.create_date|date:"F d, Y G:i a" }}
											 				{% else %}
											 					{{ task.update_date|date:"F d, Y H:i a" }}
											 				{% endif %}
											 			</div>
											 			<div class="col-sm-6 task_feed_view_task" style="text-align: right;">
											 				View ticket
											 			</div>
										 			</div>
										 		</div>
									  		</div>
								  		</li>
									{% endfor %}
								</ul>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="card ">
						<div class="card-body" style="height: 420px;">
							<div class="row">
								<div class="col-sm-9 feeds_title">
									<h4>Overdue Work Items</h4>
								</div>
								<div class="col-sm-3" style="text-align: right;">
									<div class="dropdown">
										<span class="dropdown-toggle" type="button" id="TicketPriorityDropDown" data-bs-toggle="dropdown" aria-expanded="false">
											<b>Priority</b>
										</span>
										<ul class="dropdown-menu" aria-labelledby="TicketPriorityDropDown">
									    <li><a class="dropdown-item" href="#">Open</a></li>
									    <li><a class="dropdown-item" href="#">In Progress</a></li>
									    <li><a class="dropdown-item" href="#">For Approval</a></li>
									    <li><a class="dropdown-item" href="#">Complete</a></li>
										</ul>
								</div>
								</div>
							</div>
							<div class="row scroll" style="height: 350px;">
								<ul class="list-group">
							  		<li class="list-group-item remove-border-list">
										<div class="row">
											<div class="col-sm-1">
												<img src="https://github.com/mdo.png" alt="mdo" width="35" height="35" class="rounded-circle" style="margin-top: 5px;">
											</div>
											<div class="col-sm-11">
												<div class="row">
													<div class="col-sm-8">
														<span class="badge rounded-pill bg-warning">Ticket# </span> Invoice Computation Error
													</div>
													<div class="col-sm-4" style="text-align: right;">
														Severity: <span class="ticket_critical"><b>CRITICAL</b></span>
													</div>
												</div>
												<div class="row">
													<div class="col-sm-6">
														<i class="fa-solid fa-briefcase" style="color:#C2C2C399;"></i> Client Name
													</div>
													<div class="col-sm-6" style="text-align: right;">
														<span class="badge rounded-pill bg-warning">In Progress</span>
													</div>
												</div>
											</div>
										</div>
							  		</li>
							  		<hr>
							  		<li class="list-group-item remove-border-list">
										<div class="row">
											<div class="col-sm-1">
												<img src="https://github.com/mdo.png" alt="mdo" width="35" height="35" class="rounded-circle" style="margin-top: 5px;">
											</div>
											<div class="col-sm-11">
												<div class="row">
													<div class="col-sm-8">
														<span class="badge bg-success">Ticket# </span> Invoice Computation Error
													</div>
													<div class="col-sm-4" style="text-align: right;">
														Severity: <span class="ticket_critical"><b>CRITICAL</b></span>
													</div>
												</div>
												<div class="row">
													<div class="col-sm-6">
														<i class="fa-solid fa-briefcase" style="color:#C2C2C399;"></i> Client Name
													</div>
													<div class="col-sm-6" style="text-align: right;">
														<span class="badge bg-success">To be Tested</span>
													</div>
												</div>
											</div>
										</div>
							  		</li>
							  		<hr>
							  		<li class="list-group-item remove-border-list">
										<div class="row">
											<div class="col-sm-1">
												<img src="https://github.com/mdo.png" alt="mdo" width="35" height="35" class="rounded-circle" style="margin-top: 5px;">
											</div>
											<div class="col-sm-11">
												<div class="row">
													<div class="col-sm-8">
														<span class="badge rounded-pill bg-warning">Ticket# </span> Invoice Computation Error
													</div>
													<div class="col-sm-4" style="text-align: right;">
														Severity: <span class="ticket_critical"><b>CRITICAL</b></span>
													</div>
												</div>
												<div class="row">
													<div class="col-sm-6">
														<i class="fa-solid fa-briefcase" style="color:#C2C2C399;"></i> Client Name
													</div>
													<div class="col-sm-6" style="text-align: right;">
														<span class="badge rounded-pill bg-warning">In Progress</span>
													</div>
												</div>
											</div>
										</div>
							  		</li>
							  		<hr>
							  		<li class="list-group-item remove-border-list">
										<div class="row">
											<div class="col-sm-1">
												<img src="https://github.com/mdo.png" alt="mdo" width="35" height="35" class="rounded-circle" style="margin-top: 5px;">
											</div>
											<div class="col-sm-11">
												<div class="row">
													<div class="col-sm-8">
														<span class="badge bg-success">Ticket# </span> Invoice Computation Error
													</div>
													<div class="col-sm-4" style="text-align: right;">
														Severity: <span class="ticket_critical"><b>CRITICAL</b></span>
													</div>
												</div>
												<div class="row">
													<div class="col-sm-6">
														<i class="fa-solid fa-briefcase" style="color:#C2C2C399;"></i> Client Name
													</div>
													<div class="col-sm-6" style="text-align: right;">
														<span class="badge bg-success">To be Tested</span>
													</div>
												</div>
											</div>
										</div>
							  		</li>
							  		<hr>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
			<br/>
			<div class="row">
				<div class="col-sm-3">
					<div class="card mb-3" style="width: 100%;">
  						<div class="row g-0">
    						<div class="col-md-4" style="margin: auto; text-align:center;">
    							<span class="dot" style="font-size: 45px;">
    								<img style="margin-top: -15px;" src="{% static 'portal_admin/images/open_tickets.png' %}">
    							</span>
    						</div>
    						<div class="col-md-8">
      							<div class="card-body">
        							<h5 class="card-title">{{ open_task.count }}</h5>
        							<p class="card-text dashboard_cards">Open Task</p>
      							</div>
    						</div>
  						</div>
					</div>
				</div>
				<div class="col-sm-3">
					<div class="card mb-3" style="width: 100%;">
  						<div class="row g-0">
    						<div class="col-md-4" style="margin: auto; text-align:center;">
    							<span class="dot" style="font-size: 45px;">
    								<img style="margin-top: -15px;" src="{% static 'portal_admin/images/ticket_in_progress.png' %}">
    							</span>
    						</div>
    						<div class="col-md-8">
      							<div class="card-body">
        							<h5 class="card-title">{{ in_progress_tasks.count }}</h5>
        							<p class="card-text dashboard_cards">Task in Process</p>
      							</div>
    						</div>
  						</div>
					</div>
				</div>
				<div class="col-sm-3">
					<div class="card mb-3" style="width: 100%;">
  						<div class="row g-0">
    						<div class="col-md-4" style="margin: auto; text-align:center;">
    							<span class="dot" style="font-size: 45px;">
    								<img style="margin-top: -15px;" src="{% static 'portal_admin/images/to_be_tested.png' %}">
    							</span>
    						</div>
    						<div class="col-md-8">
      							<div class="card-body">
        							<h5 class="card-title">{{ approval_tasks.count }}</h5>
        							<p class="card-text dashboard_cards">Task for Approval</p>
      							</div>
    						</div>
  						</div>
					</div>
				</div>
				<div class="col-sm-3">
					<a href="{% url 'portalAdminTaskList' %}" style="text-decoration:none;">
						<div class="card mb-3" style="width: 100%;">
	  						<div class="row g-0">
	    						<div class="col-md-4" style="margin: auto; text-align:center;">
	    							<span class="dot" style="font-size: 45px;">
	    								<img style="margin-top: -15px;" src="{% static 'portal_admin/images/open_tickets.png' %}">
	    							</span>
	    						</div>
	    						<div class="col-md-8">
	      							<div class="card-body">
	        							<h4 class="card-title" style="color: #000000;" >VIEW ALL<br/>Task</h4>
	      							</div>
	    						</div>
	  						</div>
						</div>
					</a>
				</div>
			</div>
		</div>
		<div class="col-sm-3">
			<div class="card">
				<div class="card-body" style="height: 540px;">
					<div class="row">
						<div class="col-sm-12 feeds_title">
							<h3>Activity Logs</h3>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-4">
			
		</div>
		<div class="col-sm-4">
			
		</div>
		<div class="col-sm-4">
			
		</div>
	</div>
{% endblock %}