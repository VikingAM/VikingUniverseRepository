{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profile | Settings</title>
    <link rel="stylesheet" href="{% static 'portal/css/index.css' %}">
    <link rel="stylesheet" href="{% static 'portal/css/style_v1.css' %}">
    <link rel="stylesheet" href="{% static 'fontawesome/css/fontawesome_5_13.min.css' %}">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <!-- Sidebar Panel -->
    <div class="overlay hidden" onclick="toggleOverlayInvoice()" id="overlay_id"></div>
    <div class="flex">
        {% include 'sidebar.html' %}
        <!-- Settings Sidebar -->
        <div class="flex">
            <nav class="w-52 xl:ml-0 xl:w-44 bxl:w-52 h-auto ml-22 bg-gray-200 flex justify-center text-lg">
                <ul>
                    <li>
                        <center><p href="#" class="text-2xl bxl:text-xl bxl:mt-12 xl:text-lg mt-5 font-Lato font-bold">Settings</p></center> 
                    </li>
                    <div class="mt-20 flex-row space-y-8 xl:text-2base">
                        <li>
                            <span class="fas fa-pencil-alt mr-2 text-transparent bg-clip-text bg-gradient-to-r from-textGrad1 to-textGrad2 bxl:text-base"></span>
                            <a href="{% url 'portalSettingPage' %}" class="bxl:text-base font-Lato text-transparent bg-clip-text bg-gradient-to-r from-textGrad1 to-textGrad2">Edit Profile</a>  
                        </li>
                        <li>
                            <span class="fas fa-lock mr-2 bxl:text-base"></span>
                            <a href="{% url 'SettingPasswordPage' %}" class="font-Lato bxl:text-base">Password</a>    
                        </li>
                        <li>
                            <span class="fas fa-file-invoice-dollar mr-3 bxl:text-base"></span>
                            <a href="{% url 'SettingInvoicePage' %}" class="font-Lato bxl:text-base">Invoices</a>    
                        </li>
                        <li>
                            <span class="fas fa-key mr-1 bxl:text-base"></span>
                            <a href="{% url 'SettingPasswordManagementPage' %}" class="font-Lato bxl:text-base">Password Manager</a>    
                        </li>
                        <li>
                            <span class="fas fa-question-circle mr-1 bxl:text-base"></span>
                            <a href="{% url 'SettingFaqsPage' %}" class="font-Lato bxl:text-base">FAQs</a>    
                        </li>
                    </div>
                </ul>
            </nav>
        </div>
        <div class="">
            <nav class="bg-whiteSmoke text-white flex absolute right-0 justify-between items-center ml-0 m-8 h-20 xl:h-12 z-0 px-10 xl:px-0 mt-0 bxl:mt-2 xxl:mt-3">
                <ul class="flex items-center text-sm  text-gray-600">
                    <li class="flex items-center justify-center">
                        <a class="fas fa-search text-lg" href="#"></a>
                        <form action="">
                            <div class="h-10 flex items-center space-x-5 w-52">
                                <input class="w-full font-Poppins bxl:text-base bg-whiteSmoke text-black xl:py-1 xl:text-sm xxl:text-lg outline-0 py-4 px-5 text-lg" type="text" placeholder="Search">
                            </div>
                        </form>
                    </li>
                </ul>
                <ul class="flex items-center text-sm text-gray-600">
                    <div class="flex items-center justify-center space-x-5">
                        <li>
                            <a class="fas fa-bell text-lg ml-6 " href="#"></a>
                        </li>
                        <div class="flex items-center justify-center">
                            <li>
                                <a href="#">
                                    <img src="https://img.icons8.com/dusk/100/000000/user-female-circle.png" class="object-scale-down h-10 w-20 rounded-full"> 
                                </a>
                            </li>
                            
                            <li class="text-lg xl:text-sm xxl:text-lg">
                                <p class="font-Jost">{{ profile_details.first_name }} {{ profile_details.last_name }}</p>
                            </li>
                        </div>
                        <li class="">
                            <a class="fas fa-chevron-down text-lg ml-3" href="#"></a>
                        </li>
                    </div>
                </ul>
            </nav>
        </div>
        <div class="mt-32 xl:mt-10 xxl:mt-32 bxl:mt-16 ml-5 flex">
            <div>
                <h1 class="text-4xl xl:text-2xl font-bold font-Poppins text-editProfile"><b>Invoices</b></h1>
                <p class="font-Poppins text-gray-500 text-sm bxl:text-2base xl:w-180 font-medium">Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. 
                    Velit officia consequat duis enim velit mollit. 
                    Exercitation veniam consequat sunt nostrud amet.</p>

                <div class="w-full xxl:ml-52 xxl:mt-10">

                <div class="table__body overflow-auto xl:h-110 bxl:h-130">
                    <table class="table-auto xl:mt-5 xl:w-170 xl:mx-20 bxl:ml-32">
                        <thead class="thead_bg bg-gray-200 xl:h-8">
                            <tr class="text-sm bxl:text-2base text-gray-500">
                                <th class="font-Poppins">Invoice ID</th>
                                <th class="font-Poppins">Purchase Date</th>
                                <th class="font-Poppins">Item Purchased</th>
                                <th class="font-Poppins">Invoice Amount</th>
                            </tr>
                        </thead>
                        <tbody class="text-2base text-invCol font-Lato ">
                            {% for invoice_detail in list_of_invoice %}
                                <tr class="inv_tr border-b-1 border-gray-300">
                                    <td class="font-Lato font-semibold">
                                        <button onclick="InvoiceDetails(this)" invoice_id="{{ invoice_detail.pk }}">#{{ invoice_detail.pk }}</button>
                                    </td>
                                    <td class="font-Lato font-semibold">{{ invoice_detail.create_date|date:'M d, Y' }}</td>
                                    <td class="font-Lato font-semibold">{{ invoice_detail.product_description }}</td>
                                    <td class="font-Lato font-semibold">${{ invoice_detail.amount }}</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td rowspan="4">No Invoices</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

           

     
        </div>
    </div>
    </div>


    <div id="popup-view-invoice" class="popup bg-gray-50 xl:w-135 xl:h-110 flex-col absolute z-10 xl:p-6">
        <div class="flex justify-between">
            <h1 class="font-Poppins text-xl font-bold text-purple-900 invoiceModalHeader" >INVOICE No. ###</h1>
            <button onclick="toggleCancelInvoice()" class="fa fa-times-circle text-purple-900 text-xl xl:-mt-10 " aria-hidden="true"></button>
        </div>
        <div>
            <table class=" xl:mt-5 xl:w-120">
                
                <tbody class="inv_popup text-2base font-Lato ">
              
                  <tr class="inv_tr border-b-1 border-gray-300 ">
                        <td class="font-Lato font-semibold text-purple-900 ">Date</td>
                        <td class="font-Lato purchase_date">November 8, 2022</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                        <td class="font-Lato font-semibold text-purple-900">Payment Method</td>
                        <td class="font-Lato payment_method">Card (#### #### #### 1234)</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                        <td class="font-Lato font-semibold text-purple-900">Customer Number</td>
                        <td class="font-Lato customer_id">0081</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                        <td class="font-Lato font-semibold text-purple-900">Address</td>
                        <td class="font-Lato customer_address">123 Anywhere St., Any City, ST 12345</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                        <td class="font-Lato font-semibold text-purple-900">Product</td>
                        <td class="font-Lato invoice_product">Credits Bundle A</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                        <td class="font-Lato font-semibold text-purple-900">Quantity</td>
                        <td class="font-Lato invoice_quantity">1</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                    <td class="font-Lato font-semibold text-purple-900">Breakdown</td>
                    <td class="font-Lato invoice_description">Credits Bundle A - 150 Credits</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                        <td class="font-Lato font-semibold text-purple-900">Total Tax</td>
                        <td class="font-Lato invoice_tax">$0</td>
                  </tr>
                  <tr class="inv_tr border-b-1 border-gray-300">
                        <td class="font-Lato font-semibold text-purple-900">Total</td>
                        <td class="font-Lato invoice_total">$1000</td>
                  </tr>
                  
                </tbody>
            </table>
            <div class="flex flex-col xl:mt-2">
                <a href="#" class=" font-Lato text-gray-400 text-2base"><u>Terms and Conditions</u></a>
                <a href="#" class=" font-Lato text-gray-400 text-2base"><u>Print Invoice</u></a>
            </div>
        </div>
    </div>
    
   
   <!-- togglePopupInvoice -->
    <script src="{% static 'portal/js/uploadImg.js' %}"></script>
    <script src="{% static 'portal/js/enableBtn.js' %}"></script>
    <script type="text/javascript" src="{% static 'portal/js/jquery_3.7.0.js' %}"></script>
    <script type="text/javascript">
        function InvoiceDetails(that){
            var invoiceId = $(that).attr("invoice_id");
            $.ajax({
                type: "POST",
                url: "{% url 'invoiceDetailsGetById' %}",
                data: {
                        "csrfmiddlewaretoken": '{{ csrf_token }}',
                        "invoiceId": invoiceId,
                    },
                async:true,
                success: function (data) {
                    $(".purchase_date").empty();
                    $(".payment_method").empty();
                    $(".customer_id").empty();
                    $(".customer_address").empty();
                    $(".invoice_product").empty();
                    $(".invoice_quantity").empty();
                    $(".invoice_description").empty();
                    $(".invoice_tax").empty();
                    $(".invoice_total").empty();

                    $(".purchase_date").append(data.purchase_date);
                    $(".payment_method").append(data.payment_method);
                    $(".customer_id").append(data.customer_number);
                    $(".customer_address").append(data.customer_address);
                    $(".invoice_product").append(data.product_name);
                    $(".invoice_quantity").append(data.product_qty);
                    $(".invoice_description").append(data.product_desc);
                    $(".invoice_tax").append("$"+data.product_tax);
                    $(".invoice_total").append("$"+data.product_total);

                    togglePopupInvoice();

                },
                error: function (e) {
                    console.log(e)
                }
            })
    }
    </script>
</body>
</html>