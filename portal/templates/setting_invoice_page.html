{% load static %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Invoice</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@1,700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="{% static 'portal/css/navbar.css' %}">
	<link rel="stylesheet" href="{% static 'portal/css/profile.css' %}">
	<link rel="stylesheet" href="{% static 'fontawesome/css/all.css' %}">
</head>
<body style="background:#F5F6FA;">
	<div class="row" id="body-row">
		{% include 'sidebar_v1.html' %}
		<div class="col main-container" style="padding-left: 0px;">
			<div class="row">
				{% include 'setting_sub_menu.html' %}
				<div class="col main-container">
					<div class="container-fluid">
						<br/>
						<div class="row search_bar_wrapper">
    						<div class="col-sm-10"></div>
							<div class="col-sm-2" style="text-align:right; margin: auto;">
								<i class="fas fa-fw fa-bell"></i> <span class="indicator"></span>
								<span>
									<img src="https://img.icons8.com/dusk/100/000000/user-female-circle.png" alt="" class="user-avatar-md rounded-circle" width="25px">
									{{ profile_details.first_name }} {{ profile_details.last_name }}
			    					<span class="dropdown">
										<span class="fa-solid fa-angle-down" type="button" id="Account-menu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></span>
										<div class="dropdown-menu dropdown-menu-right" aria-labelledby="Account-menu">
											<button class="dropdown-item" type="button">Account</button>
										    <button class="dropdown-item" type="button">Settings</button>
										    <button class="dropdown-item" type="button">Logout</button>
										</div>
									</span>
								</span>
							</div>
    					</div>
    					<div class="row">
							<br/><br/>
							<div class="col-sm-12 invoiceHeader">Invoices</div>
						</div>
						<div class="row">
							<div class="col-sm-10 invoiceHeaderSubText">
								<p>Amet minim mollit non deserunt ullamco est sit aliqua dolor do amet sint. Velit officia consequat duis enim velit mollit. Exercitation veniam consequat sunt nostrud amet.</p>
							</div>
							<div class="col-sm-2"></div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								<table class="table invoiceTable">
									<tr>
								    	<th scope="col" width="25%"  >Invoice ID</th>
								    	<th scope="col" width="25%" class="center">Purchase Date</th>
								    	<th scope="col" width="25%" class="center">Item Purchased</th>
								    	<th scope="col" width="25%" class="center">Invoice Amount</th>
								    </tr>
								    <tbody>
								    	{% for invoice_detail in list_of_invoice %}
								    		<tr>
									    		<td><a href="javascript:void(0);" invoice_id="{{ invoice_detail.pk }}" onclick="InvoiceDetails(this)">#{{ invoice_detail.pk }}</a></td>
									    		<td>{{ invoice_detail.create_date|date:'M d, Y' }}</td>
									    		<td>{{ invoice_detail.product_description }}</td>
									    		<td>${{ invoice_detail.amount }}</td>
									    	</tr>
								    	{% empty %}
								    		<tr>
									    		<td rowspan="4">No Invoices</td>
									    	</tr>
								    	{% endfor %}
								    </tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>



	<div class="modal fade" id="InvoiceDetails" tabindex="-1" aria-labelledby="InvoiceDetailsLabel" aria-hidden="true">
  	<div class="modal-dialog">
    	<div class="modal-content">
      		<div class="modal-body">
        		<div class="row">
        			<div class="col-sm-12 invoiceModalHeader">
        				INVOICE No. 12995
        			</div>
        		</div>
        		<br/><br/>
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Date
        			</div>
        			<div class="col-sm-7 purchase_date">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Payment Method
        			</div>
        			<div class="col-sm-7 payment_method">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Customer Number
        			</div>
        			<div class="col-sm-7 customer_id">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Address
        			</div>
        			<div class="col-sm-7 customer_address">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Product
        			</div>
        			<div class="col-sm-7 invoice_product">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Quantity
        			</div>
        			<div class="col-sm-7 invoice_quantity">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Breakdown
        			</div>
        			<div class="col-sm-7 invoice_description">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Total Tax
        			</div>
        			<div class="col-sm-7 invoice_tax">
        				0
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<div class="row">
        			<div class="col-sm-5 invoicelabel">
        				Total
        			</div>
        			<div class="col-sm-7 invoice_total">
        				
        			</div>
        		</div>
        		<hr class="hrInvoiceDetails">
        		<br/><br/>
        		<div class="row">
        			<div class="col-sm-12 invoice_termConditions">
        				Terms and Conditions
        			</div>
        		</div>
        		<div class="row">
        			<div class="col-sm-12 invoice_termConditions">
        				Print Invoice
        			</div>
        		</div>
      		</div>
    	</div>
  	</div>
</div>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
	<script src="{% static 'portal/js/portalnavbar.js' %}"></script>
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<script type="text/javascript">
		function InvoiceDetails(that){
		var invoiceId = $(that).attr("invoice_id");
		$.ajax({
	        type: "POST",
	        url: "{% url 'invoiceDetailsGetById' %}",
	        data: {
	        		"csrfmiddlewaretoken": '{{ csrf_token }}',
	        		"invoiceId": invoiceId,
	    		},
	        async:true,
	        success: function (data) {
	            console.log(data)

	            $(".purchase_date").empty();
	            $(".payment_method").empty();
	            $(".customer_id").empty();
	            $(".customer_address").empty();
	            $(".invoice_product").empty();
	            $(".invoice_quantity").empty();
	            $(".invoice_description").empty();
	            $(".invoice_tax").empty();
	            $(".invoice_total").empty();

	            $(".purchase_date").append(data.purchase_date);
	            $(".payment_method").append(data.payment_method);
	            $(".customer_id").append(data.customer_number);
	            $(".customer_address").append(data.customer_address);
	            $(".invoice_product").append(data.product_name);
	            $(".invoice_quantity").append(data.product_qty);
	            $(".invoice_description").append(data.product_desc);
	            $(".invoice_tax").append("$"+data.product_tax);
	            $(".invoice_total").append("$"+data.product_total);

	            $("#InvoiceDetails").modal("show");

	        },
	        error: function (e) {
	            console.log(e)
	        }
	    })
	}
	</script>
</body>
</html>